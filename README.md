# Study-APS-Task1
Antida Python School. Итоговое задание первого блока. Учебный проект "Сортировщик файлов"

## Формулировка задания

Реализовать консольное (CLI) приложение для сортировки музыкальных файлов по исполнителям и альбомам:

 - Программа анализирует файлы в исходной директории, считывает ID3-теги, извлекает из них информацию о названии трека, исполнителе и альбоме.
 - Группирует файлы (перемещает, не копирует) по исполнителям и альбомам, так, чтобы получить структуру директорий:
 
 `<директория назначения>/<исполнитель>/<альбом>/<имя файла>.mp3`

 - Переименовывает файлы по схеме:

`<название трека> - <исполнитель> - <альбом>.mp3`

- Если в тегах нет информации о названии трека, использует оригинальное имя файла.
- Если в тегах нет информации об исполнителе или альбоме, пропускает файл, оставляя его без изменений в исходной директории.
- Если в целевой директории файл с таким названием уже существует - заменять его.
- Файлы ищем только в исходной директории (поддиректории анализировать не нужно).
- Программа должна поддерживать только ID3v2 теги (ID3v1 - устаревший формат).
- Программа должна принимать 3 ключа командной строки: 

`--help` - вывести справочное сообщение;

`-s | --src-dir` - исходная директория, по умолчанию директория в которой запущен скрипт;

`-d | --dst-dir` - целевая директория, по умолчанию директория в которой запущен скрипт;.

 - В ходе работы программа должна выводить в консоль лог действий в виде:

`<путь до исходного файла> -> <путь до файла результата>;`

- Программа должна корректно обрабатывать ошибки (не хватает прав доступа, директория не существует и т.д.) и сообщать об этом пользователю, не прерывая свою работу.
- Кроссплатформенная работа с файловой системой

## Краткое описание и инструкция по использованию

Программа представляет собой консольное CLI-приложение, написанное на языке Python.

### Варианты вызова

- `$ python sorter.py` - пример вызова с ключами по умолчанию
- `$ python sorter.py -s C:\Music\dump -d C:\Music\sorted -n True -c True -a True` - пример вызова с указанием всех ключей
- `$ python sorter.py --help` - вызов справки

### Описание ключей

Базовые:

- `-s | --src_dir TEXT` - задаёт исходную директорию (по умолчанию - директория запуска приложения)
- `-d | --dst_dir TEXT` - задаёт директорию назанчения (по умолчанию - директория запуска приложения)

Дополнительные:

- `-n | --nested TEXT` - `True`, разрешает поиск в поддиректориях (по умолчанию `False`, поиск только в корневой директории)
- `-с | --create TEXT` - `True`, разрешает создание директории назначения, если она не существует (по умолчанию `False`, потребуется пользовательское подтверждение)
- `-a | --all_ver TEXT` - `True`, разрешает работать со всеми версиями ID3-тегов (по умолчанию `False`, обрабатываются только теги ID3v2+)

## Актуальная версия

 - Версия: [v1.0.0](https://github.com/jasper7466//tree/v1.0.0)

## Как развернуть проект

Для запуска приложения, в системе должен быть установлен интерпретатор [Python](https://www.python.org/downloads/) версии 3.8 или новее. Совместимость с более ранними версиями не проверялась.

Также, потребуется установить пакеты, не входящие в базовый состав Python:

- `$ pip install Click` - библиотека [Click](https://click.palletsprojects.com) (на ней реализован CLI)
- `$ pip install eyeD3` - библиотека [eyeD3](https://pypi.org/project/eyeD3), [документация](https://eyed3.readthedocs.io/en/latest/index.html) (используется для парсинга ID3-тегов)
- `$ pip install colorama` - библиотека [Colorama](https://pypi.org/project/colorama) (используется для кроссплатформенного управления цветом текста, выводимого в консоль)

Чтобы клонировать проект на локальный компьютер - вызовите интерфейс командной строки (например, [Git Bash](https://gitforwindows.org)) в желаемой директории и выполните команду:

- `$ git clone https://github.com/jasper7466/Study-APS-Task1.git`


## Технологии

 - Python
 - CLI
 - MP3 ID3

## Известные проблемы и что можно улучшить

- Кроссплатформенность при работе с правами доступа к файлам. Для её достижения пришлось сделать дополнительные избыточные обёртки try-except, т.к. метод `os.access()` способен полностью корректно работать только на POSIX операционных системах.
- Не обрабатываются случаи, когда в тегах присутствуют специальные символы.
- Есть проблемы с кодировками при работе с тегами.
